<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.jplmelanson</groupId>
  <artifactId>basic-pom</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>basic-pom</name>
  <description>Basic POM file for maven project with common definitions and best practices.</description>
  <url>https://github.com/jplmelanson/java-utils</url>
  <inceptionYear>2012</inceptionYear>
  <organization>
    <name>Jean-Philippe Melanson</name>
    <url>https://github.com/jplmelanson</url>
  </organization>
  <issueManagement>
    <system>github</system>
    <url>https://github.com/jplmelanson/java-utils/issues</url>
  </issueManagement>
  <!-- DEFINE IN SUB PROJECTS -->
  <!--
  <ciManagement>
    <system></system>
    <url></url>
  </ciManagement>
  -->
  <scm>
    <connection>scm:git:https://github.com/jplmelanson/java-utils.git</connection>
    <developerConnection>scm:git:https://github.com/jplmelanson/java-utils.git</developerConnection>
  </scm>
  <repositories>
    <repository>
      <id>central</id>
      <name>central repository</name>
      <url>${env.MAVEN_REPOSITORY}</url>
    </repository>
  </repositories>
    <pluginRepository>
      <snapshots />
      <id>central</id>
      <name>central repository</name>
      <url>${env.MAVEN_REPOSITORY}</url>
    </pluginRepository>
  </pluginRepositories>
  <build>
    <finalName>${project.groupId}.${project.artifactId}-${project.version}</finalName>
    <sourceDirectory>src/main/java</sourceDirectory>
    <scriptSourceDirectory>src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering><!-- enable resource filtering by default -->
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>src/test/resources</directory>
      </testResource>
    </testResources>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <version>${enforcer.plugin.version}</version>
        <executions>
          <execution>
            <id>enforce-banned-dependencies</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <phase>verify</phase>
            <configuration>
              <rules>
                <requirePluginVersions>
                  <message>Best Practice is to always define plugin versions!</message>
                  <banLatest>true</banLatest>
                  <banRelease>true</banRelease>
                  <banSnapshots>false</banSnapshots>
                  <phases>clean,verify,site</phases>
                </requirePluginVersions>
                <bannedDependencies>
                  <searchTransitive>true</searchTransitive>
                  <excludes>
                    <exclude>servlet-api:*</exclude>
                    <exclude>javax.servlet:*</exclude>
                    <exclude>xerces:*</exclude>
                    <exclude>xalan:*</exclude>
                    <exclude>xml-api:*</exclude>
                  </excludes>
                  <includes>
                    <include>servlet-api:*:*:*:test</include>
                    <include>servlet-api:*:*:*:provided</include>
                    <include>javax.servlet:*:*:*:provided</include>
                    <include>javax.servlet:*:*:*:test</include>
                    <include>xerces:*:*:*:provided</include>
                    <include>xerces:*:*:*:test</include>
                    <include>xalan:*:*:*:provided</include>
                    <include>xalan:*:*:*:test</include>
                    <include>xml-api:*:*:*:provided</include>
                    <include>xml-api:*:*:*:test</include>
                  </includes>
                </bannedDependencies>
              </rules>
              <fail>true</fail>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <!-- always create sources JAR -->
      <plugin>
        <artifactId>maven-source-plugin</artifactId>
        <executions>
          <execution>
            <id>attach-sources</id>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-install-plugin</artifactId>
        <configuration>
          <createChecksum>true</createChecksum><!-- force checksum -->
          <updateReleaseInfo>true</updateReleaseInfo><!-- force update release infos -->
        </configuration>
      </plugin>
    </plugins>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>${compiler.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-failsafe-plugin</artifactId>
          <version>${failsafe.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>${surefire.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-resources-plugin</artifactId>
          <version>${resources.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-war-plugin</artifactId>
          <version>${war.plugin.version}</version>
          <configuration>
            <webResources>
              <resource>
                <!-- enable xml web resources filtering by default -->
                <directory>${basedir}/src/main/webapp/WEB-INF</directory>
                <filtering>true</filtering>
                <targetPath>WEB-INF</targetPath>
                <includes>
                  <include>**/*.xml</include>
                </includes>
              </resource>
            </webResources>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.tomcat.maven</groupId>
          <artifactId>tomcat6-maven-plugin</artifactId>
          <version>${tomcat6.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>${antrun.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>${assembly.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>${dependency.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-release-plugin</artifactId>
          <version>${release.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-clean-plugin</artifactId>
          <version>${clean.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>${deploy.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-install-plugin</artifactId>
          <version>${install.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jar-plugin</artifactId>
          <version>${jar.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-source-plugin</artifactId>
          <version>${source.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-plugin-plugin</artifactId>
          <version>${plugin.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-invoker-plugin</artifactId>
          <version>${invoker.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-site-plugin</artifactId>
          <version>${site.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>buildnumber-maven-plugin</artifactId>
          <version>${buildnumber-maven-plugin}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-pmd-plugin</artifactId>
          <version>${pmd.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>maven-jdepend-plugin</artifactId>
          <version>${jdepend.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>findbugs-maven-plugin</artifactId>
          <version>${findbugs.maven.plugin}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-changelog-plugin</artifactId>
          <version>${changelog.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-javadoc-plugin</artifactId>
          <version>${javadoc.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>cobertura-maven-plugin</artifactId>
          <version>${cobertura.plugin.version}</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-checkstyle-plugin</artifactId>
          <version>${checkstyle.plugin.version}</version>
          <dependencies>
            <dependency>
              <groupId>mfx.libraries</groupId>
              <artifactId>build-tools</artifactId>
              <version>${build-tools.version}</version>
            </dependency>
          </dependencies>
        </plugin>
        <plugin>
          <groupId>org.eclipse.m2e</groupId>
          <artifactId>lifecycle-mapping</artifactId>
          <version>${m2e-lifecycle-mapping.plugin.version}</version>
          <!-- configuration MUST be in plugin management, otherwise m2e warning will appear -->
          <configuration>
            <lifecycleMappingMetadata>
              <pluginExecutions>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <versionRange>${enforcer.plugin.version}</versionRange>
                    <goals>
                      <goal>enforce</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <ignore />
                  </action>
                </pluginExecution>
              </pluginExecutions>
            </lifecycleMappingMetadata>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    <maven.compiler.showDeprecation>true</maven.compiler.showDeprecation>
    <maven.compiler.showWarnings>true</maven.compiler.showWarnings>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
    <maven.test.redirectTestOutputToFile>true</maven.test.redirectTestOutputToFile>
    <maven.javadoc.skip>true</maven.javadoc.skip>
    <maven.test.redirectTestOutputToFile>true</maven.test.redirectTestOutputToFile>
    <!-- plugins version -->
    <clean.plugin.version />
    <compiler.plugin.version>2.5.1</compiler.plugin.version>
    <surefire.plugin.version>2.12.4</surefire.plugin.version>
    <failsafe.plugin.version>2.12.4</failsafe.plugin.version>
    <cobertura.plugin.version>2.5.2</cobertura.plugin.version>
    <resources.plugin.version>2.6</resources.plugin.version>
    <!-- 2.0 has a nasty bug and 2.1 is not still snapshot -->
    <tomcat6.plugin.version>2.0-beta-1</tomcat6.plugin.version>
    <war.plugin.version>2.3</war.plugin.version>
    <antrun.plugin.version>1.7</antrun.plugin.version>
    <assembly.plugin.version>2.3</assembly.plugin.version>
    <dependency.plugin.version>2.5.1</dependency.plugin.version>
    <release.plugin.version>2.3.2</release.plugin.version>
    <clean.plugin.version>2.5</clean.plugin.version>
    <deploy.plugin.version>2.7</deploy.plugin.version>
    <install.plugin.version>2.4</install.plugin.version>
    <jar.plugin.version>2.4</jar.plugin.version>
    <source.plugin.version>2.2.1</source.plugin.version>
    <plugin.plugin.version>3.1</plugin.plugin.version>
    <invoker.plugin.version>1.7</invoker.plugin.version>
    <javadoc.plugin.version>2.9</javadoc.plugin.version>
    <checkstyle.plugin.version>2.9.1</checkstyle.plugin.version>
    <build-tools.version>1.0.1</build-tools.version>
    <jxr.plugin.version>2.3</jxr.plugin.version>
    <pmd.plugin.version>2.7.1</pmd.plugin.version>
    <changelog.plugin.version>2.2</changelog.plugin.version>
    <findbugs.maven.plugin>2.5.2</findbugs.maven.plugin>
    <enforcer.plugin.version>1.1.1</enforcer.plugin.version>
    <site.plugin.version>3.2</site.plugin.version>
    <buildnumber-maven-plugin>1.2</buildnumber-maven-plugin>
    <m2e-lifecycle-mapping.plugin.version>1.0.0</m2e-lifecycle-mapping.plugin.version>
    <jdepend.plugin.version>2.0-beta-2</jdepend.plugin.version>
  </properties>
  <profiles>
    <profile>
      <id>release-profile</id>
      <activation>
        <property>
          <name>performRelease</name>
          <value>true</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <inherited>true</inherited>
            <artifactId>maven-source-plugin</artifactId>
            <executions>
              <execution>
                <id>attach-sources</id>
                <goals>
                  <goal>jar</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
              <inherited>true</inherited>
              <artifactId>maven-javadoc-plugin</artifactId>
              <executions>
                  <execution>
                      <id>attach-javadocs</id>
                      <goals>
                          <goal>jar</goal>
                      </goals>
                  </execution>
              </executions>
          </plugin>
          <plugin>
            <inherited>true</inherited>
            <artifactId>maven-deploy-plugin</artifactId>
            <configuration>
              <updateReleaseInfo>true</updateReleaseInfo>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
</project>
